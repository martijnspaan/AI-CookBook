<div class="week-menu-container">
  <div class="week-menu-content">
    <!-- Saving Indicator -->
    <div *ngIf="isSaving" class="saving-indicator">
      <i class="fas fa-spinner fa-spin"></i>
      <span>Saving week menu...</span>
    </div>

    <!-- Loading Indicator -->
    <div *ngIf="isCalendarLoading" class="loading-indicator">
      <div class="spinner"></div>
    </div>

    <!-- Week Calendar -->
    <app-week-calendar 
      *ngIf="!isCalendarLoading"
      [selectedWeek]="selectedWeek"
      [recipeAssignments]="recipeAssignments"
      [selectedMealSlot]="selectedMealSlot"
      (weekChanged)="onWeekChanged($event)"
      (mealSlotClicked)="onMealSlotClicked($event.mealType, $event.date)">
    </app-week-calendar>


    <!-- Recipe Selection Dialog -->
    <app-recipe-selection-dialog
      [isVisible]="showRecipeSelectionDialog"
      [selectedMealType]="selectedMealType"
      [selectedDate]="selectedDate"
      [currentRecipe]="currentRecipe"
      (recipeSelected)="onRecipeSelected($event)"
      (recipeRemoved)="onRecipeRemoved($event)"
      (dialogClosed)="onDialogClosed()">
    </app-recipe-selection-dialog>

    <!-- Grocery List Dialog -->
    <app-grocery-list-dialog
      [isVisible]="showGroceryListDialog"
      [recipeAssignments]="recipeAssignments"
      (groceryListCreated)="onGroceryListCreated($event)"
      (dialogClosed)="onGroceryListDialogClosed()">
    </app-grocery-list-dialog>
  </div>
</div>
