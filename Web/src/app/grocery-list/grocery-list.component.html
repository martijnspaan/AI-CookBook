<div class="grocery-list-container">
  <div class="grocery-list-content">

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state">
      <div class="spinner"></div>
      <p>Loading grocery lists...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="errorMessage && !isLoading" class="error-state">
      <div class="error-icon">‚ö†Ô∏è</div>
      <p>{{ errorMessage }}</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && !errorMessage && groceryLists.length === 0" class="empty-state">
      <div class="empty-icon">üõí</div>
      <h3>No Grocery Lists Yet</h3>
      <p>Create your first grocery list by planning meals in the Week Menu.</p>
    </div>

    <!-- Grocery Lists -->
    <div *ngIf="!isLoading && !errorMessage && groceryLists.length > 0" class="grocery-lists">
      <div *ngFor="let groceryList of groceryLists" class="grocery-list-card" (click)="viewGroceryListDetails(groceryList.id)">
        <div class="grocery-list-card-content">
          <!-- Header with date and action buttons -->
          <div class="d-flex justify-content-between align-items-center mb-1">
            <h5 class="grocery-list-title mb-0">{{ getFormattedDate(groceryList.dayOfGrocery) }}</h5>
            <div class="d-flex gap-2">
              <button 
                type="button" 
                class="btn btn-outline-primary btn-sm edit-button"
                (click)="editGroceryList(groceryList, $event)"
                title="Edit grocery list">
                <i class="fas fa-edit"></i>
              </button>
              <button 
                type="button" 
                class="btn btn-outline-danger btn-sm delete-button"
                (click)="deleteGroceryList(groceryList.id); $event.stopPropagation()"
                [disabled]="isDeleting"
                title="Delete grocery list">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

          <!-- Meals section grouped by day -->
          <div class="meals-section">
            <div *ngFor="let dayGroup of getMealsGroupedByDay(groceryList.meals)" class="day-group">
              <div class="day-header">
                <span class="day-label">{{ getFormattedDayDate(dayGroup.day) }}</span>
              </div>
              <div class="meals-list-compact">
                <div *ngFor="let meal of dayGroup.meals" class="meal-item-row">
                  <span class="meal-name">{{ meal.recipeTitle || 'Loading...' }}</span>
                  <span class="badge bg-primary meal-type-badge">{{ getMealTypeLabel(meal.mealType) }}</span>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Edit Grocery List Dialog -->
  <app-edit-grocery-list-dialog
    [isVisible]="showEditDialog"
    [groceryList]="selectedGroceryListForEdit"
    [recipeAssignments]="recipeAssignments"
    (groceryListUpdated)="onGroceryListUpdated($event)"
    (dialogClosed)="closeEditDialog()">
  </app-edit-grocery-list-dialog>

</div>
